{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let HelperPageComponent = class HelperPageComponent {\n  constructor(helperService, cupboardService) {\n    this.helperService = helperService;\n    this.cupboardService = cupboardService;\n    this.cupboardNeeds = [];\n    this.fundingBasket = [];\n    this.supportedNeeds = [];\n    this.searchTerm = '';\n  }\n  ngOnInit() {\n    this.getCupboardNeeds();\n  }\n  getCupboardNeeds() {\n    this.helperService.getAllNeeds().subscribe(needs => {\n      this.cupboardNeeds = needs;\n    }, error => {\n      console.error(error);\n    });\n  }\n  searchCupboardNeeds() {\n    if (!this.searchTerm.trim()) {\n      this.getCupboardNeeds();\n      return;\n    }\n    this.helperService.searchPartialName(this.searchTerm).subscribe(filteredNeeds => {\n      this.cupboardNeeds = filteredNeeds;\n    }, error => {\n      console.error(error);\n    });\n  }\n  resetCupboardSearch() {\n    this.searchTerm = '';\n    this.getCupboardNeeds();\n  }\n  addToBasket(cupboardNeed) {\n    if (cupboardNeed.quantity > 0) {\n      this.helperService.addSupportedNeed(cupboardNeed.name, 1).subscribe(addedNeed => {\n        const originalBasketIndex = this.fundingBasket.findIndex(n => n.name === addedNeed.name);\n        if (originalBasketIndex !== -1) {\n          this.fundingBasket[originalBasketIndex].quantity += 1;\n        } else {\n          this.fundingBasket.push(addedNeed);\n        }\n        const foundNeed = this.cupboardNeeds.find(n => n.name === cupboardNeed.name);\n        if (foundNeed) {\n          foundNeed.quantity -= 1;\n        }\n        const message = `Adding need to the basket`;\n        alert(message);\n      }, error => {\n        console.error(error);\n        const message = `Error adding need to the basket`;\n        alert(message);\n      });\n    } else {\n      const message = `Cannot add need to the basket since the quantity is already at 0.`;\n      alert(message);\n    }\n  }\n  removeFromBasket(need) {\n    this.helperService.removeSupportedNeed(need.name).subscribe(_ => {\n      const originalNeed = this.cupboardNeeds.find(n => n.name === need.name);\n      if (originalNeed) {\n        originalNeed.quantity += 1;\n        this.fundingBasket = this.fundingBasket.filter(n => n.name !== need.name);\n        const message = `Removing need from basket`;\n        alert(message);\n      } else {\n        const message = `Original need not found in cupboard`;\n        alert(message);\n      }\n    }, error => {\n      console.error(error);\n      const message = `Error removing need from basket`;\n      alert(message);\n    });\n  }\n  checkout() {\n    this.helperService.checkOut().subscribe(_ => {\n      this.fundingBasket = this.fundingBasket.filter(need => need.quantity > 0);\n      this.fundingBasket = [];\n      this.supportedNeeds = [];\n      this.getCupboardNeeds();\n      const message = 'Checkout Successful!';\n      alert(message);\n    }, error => {\n      console.error(error);\n      const message = 'Error during checkout';\n      alert(message);\n    });\n  }\n};\nHelperPageComponent = __decorate([Component({\n  selector: 'app-helper-page',\n  templateUrl: './helper-page.component.html',\n  styleUrls: ['./helper-page.component.scss']\n})], HelperPageComponent);","map":{"version":3,"names":["Component","HelperPageComponent","constructor","helperService","cupboardService","cupboardNeeds","fundingBasket","supportedNeeds","searchTerm","ngOnInit","getCupboardNeeds","getAllNeeds","subscribe","needs","error","console","searchCupboardNeeds","trim","searchPartialName","filteredNeeds","resetCupboardSearch","addToBasket","cupboardNeed","quantity","addSupportedNeed","name","addedNeed","originalBasketIndex","findIndex","n","push","foundNeed","find","message","alert","removeFromBasket","need","removeSupportedNeed","_","originalNeed","filter","checkout","checkOut","__decorate","selector","templateUrl","styleUrls"],"sources":["/Users/soulacex/swen-261/team-project-2231-swen-261-07-7-g-fundsinhighplaces/ufund-ui/UFund-Store/src/app/helper/helper-page/helper-page.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Needs } from 'src/app/needs';\nimport { HelperService } from 'src/app/helper.service';\nimport { Cupboard } from 'src/app/cupboard.service';\n\n@Component({\n  selector: 'app-helper-page',\n  templateUrl: './helper-page.component.html',\n  styleUrls: ['./helper-page.component.scss']\n})\nexport class HelperPageComponent implements OnInit {\n\n  cupboardNeeds: Needs[] = [];\n  fundingBasket: Needs[] = [];\n  supportedNeeds: Needs[] = [];\n  selectedNeed?: Needs;\n  searchTerm: string = '';\n\n  constructor(private helperService: HelperService, private cupboardService: Cupboard) {}\n\n  ngOnInit(): void {\n    this.getCupboardNeeds(); \n  }\n\n  getCupboardNeeds(): void {\n    this.helperService.getAllNeeds().subscribe(\n      (needs: Needs[]) => {\n        this.cupboardNeeds = needs;\n      },\n      (error: any) => {\n        console.error(error);\n      }\n    );\n  }\n\n  searchCupboardNeeds(): void {\n    if (!this.searchTerm.trim()) {\n      this.getCupboardNeeds();\n      return;\n    }\n\n    this.helperService.searchPartialName(this.searchTerm).subscribe(\n      (filteredNeeds: Needs[]) => {\n        this.cupboardNeeds = filteredNeeds;\n      },\n      (error: any) => {\n        console.error(error);\n      }\n    );\n  }\n\n  resetCupboardSearch(): void {\n    this.searchTerm = '';\n    this.getCupboardNeeds();\n  }\n\n  addToBasket(cupboardNeed: Needs): void {\n    if (cupboardNeed.quantity > 0) {\n      this.helperService.addSupportedNeed(cupboardNeed.name, 1).subscribe(\n        (addedNeed: Needs) => {\n          const originalBasketIndex = this.fundingBasket.findIndex(n => n.name === addedNeed.name);\n          if (originalBasketIndex !== -1) {\n            this.fundingBasket[originalBasketIndex].quantity += 1;\n          } else {\n            this.fundingBasket.push(addedNeed);\n          }\n\n          const foundNeed = this.cupboardNeeds.find(n => n.name === cupboardNeed.name);\n          if (foundNeed) {\n            foundNeed.quantity -= 1;\n          }\n\n          const message = `Adding need to the basket`;\n          alert(message);\n        },\n        error => {\n          console.error(error);\n          const message = `Error adding need to the basket`;\n          alert(message);\n        }\n      );\n    } else {\n      const message = `Cannot add need to the basket since the quantity is already at 0.`;\n      alert(message);\n    }\n  }\n\n  removeFromBasket(need: Needs): void {\n    this.helperService.removeSupportedNeed(need.name).subscribe(\n      _ => {\n        const originalNeed = this.cupboardNeeds.find(n => n.name === need.name);\n        if (originalNeed) {\n          originalNeed.quantity += 1;\n\n          this.fundingBasket = this.fundingBasket.filter(n => n.name !== need.name);\n\n          const message = `Removing need from basket`;\n          alert(message);\n        } else {\n          const message = `Original need not found in cupboard`;\n          alert(message);\n        }\n      },\n      error => {\n        console.error(error);\n        const message = `Error removing need from basket`;\n        alert(message);\n      }\n    );\n  }\n\n  checkout(): void {\n    this.helperService.checkOut().subscribe(\n      _ => {\n        this.fundingBasket = this.fundingBasket.filter(need => need.quantity > 0);\n\n        this.fundingBasket = [];\n        this.supportedNeeds = [];\n        this.getCupboardNeeds();\n\n        const message = 'Checkout Successful!';\n        alert(message);\n      },\n      error => {\n        console.error(error);\n        const message = 'Error during checkout';\n        alert(message);\n      }\n    );\n  }\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}