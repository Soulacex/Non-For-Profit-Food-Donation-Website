{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let HelperPageComponent = class HelperPageComponent {\n  constructor(helperService, cupboardService, fundingBasketService) {\n    this.helperService = helperService;\n    this.cupboardService = cupboardService;\n    this.fundingBasketService = fundingBasketService;\n    this.cupboardNeeds = [];\n    this.fundingBasket = [];\n    this.supportedNeeds = [];\n    this.searchTerm = '';\n  }\n  ngOnInit() {\n    this.cupboardService.getCupboardNeedsObservable().subscribe(needs => {\n      this.cupboardNeeds = needs;\n    });\n  }\n  showNeedDetails(need) {\n    this.selectedNeed = need;\n  }\n  onSelect(need) {\n    this.selectedNeed = need;\n  }\n  searchCupboardNeeds() {\n    if (!this.searchTerm.trim()) {\n      this.getCupboardNeeds();\n      return;\n    }\n    const filteredNeeds = this.cupboardNeeds.filter(need => need.name.toLowerCase().includes(this.searchTerm.toLowerCase()));\n    this.cupboardNeeds = filteredNeeds;\n  }\n  resetCupboardSearch() {\n    this.searchTerm = '';\n    this.getCupboardNeeds();\n  }\n  addToBasket(cupboardNeed) {\n    if (cupboardNeed.quantity > 0) {\n      this.fundingBasket.addSupportedNeed(cupboardNeed).subscribe(addedNeed => {\n        const copiedNeed = {\n          name: addedNeed.name,\n          cost: addedNeed.cost,\n          type: addedNeed.type,\n          quantity: 1\n        };\n        this.fundingBasket.push(copiedNeed);\n        const originalNeedIndex = this.cupboardNeeds.findIndex(n => n.name === cupboardNeed.name);\n        if (originalNeedIndex !== -1) {\n          this.cupboardNeeds[originalNeedIndex].quantity -= 1;\n        }\n        const supportedNeedIndex = this.cupboardNeeds.findIndex(n => n.name === copiedNeed.name);\n        if (supportedNeedIndex !== -1) {\n          this.cupboardNeeds[supportedNeedIndex] = copiedNeed;\n        } else {\n          this.cupboardNeeds.push(copiedNeed);\n        }\n        const message = `Adding need to the basket`;\n        alert(message);\n      }, error => {\n        console.error(error);\n      });\n    } else {\n      const message = `Cannot add need to the basket since the quantity is already at 0.`;\n      alert(message);\n    }\n  }\n  removeFromBasket(need) {\n    this.helperService.removeSupportedNeed(need.name).subscribe(_ => {\n      const originalNeed = this.fundingBasket.find(n => n.name === need.name);\n      if (originalNeed) {\n        originalNeed.quantity += 1;\n        this.fundingBasket = this.fundingBasket.filter(n => n.name !== need.name);\n        this.supportedNeeds = this.supportedNeeds.filter(n => n.name !== need.name);\n        const message = `Removing need from basket`;\n        alert(message);\n      } else {\n        const message = `Unable to remove since not in Funding Basket`;\n        alert(message);\n      }\n    }, error => {\n      console.error(error);\n    });\n  }\n  checkout() {\n    this.helperService.checkOut().subscribe(_ => {\n      this.fundingBasket = this.fundingBasket.filter(need => need.quantity > 0);\n      this.fundingBasket = [];\n      this.supportedNeeds = [];\n      const message = 'Checkout Successful!';\n      alert(message);\n    }, error => {\n      console.error(error);\n    });\n  }\n  getCupboardNeeds() {\n    this.cupboardService.getCupboardNeedsObservable().subscribe(needs => {\n      this.cupboardNeeds = needs;\n    });\n  }\n};\nHelperPageComponent = __decorate([Component({\n  selector: 'app-helper-page',\n  templateUrl: './helper-page.component.html',\n  styleUrls: ['./helper-page.component.scss']\n})], HelperPageComponent);","map":{"version":3,"names":["Component","HelperPageComponent","constructor","helperService","cupboardService","fundingBasketService","cupboardNeeds","fundingBasket","supportedNeeds","searchTerm","ngOnInit","getCupboardNeedsObservable","subscribe","needs","showNeedDetails","need","selectedNeed","onSelect","searchCupboardNeeds","trim","getCupboardNeeds","filteredNeeds","filter","name","toLowerCase","includes","resetCupboardSearch","addToBasket","cupboardNeed","quantity","addSupportedNeed","addedNeed","copiedNeed","cost","type","push","originalNeedIndex","findIndex","n","supportedNeedIndex","message","alert","error","console","removeFromBasket","removeSupportedNeed","_","originalNeed","find","checkout","checkOut","__decorate","selector","templateUrl","styleUrls"],"sources":["/Users/soulacex/swen-261/team-project-2231-swen-261-07-7-g-fundsinhighplaces/ufund-ui/UFund-Store/src/app/helper/helper-page/helper-page.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Needs } from 'src/app/needs';\nimport { HelperService } from 'src/app/helper.service';\nimport { Cupboard } from 'src/app/cupboard.service';\nimport { FundingBasket } from 'src/app/fundingbasket.service';\n\n@Component({\n  selector: 'app-helper-page',\n  templateUrl: './helper-page.component.html',\n  styleUrls: ['./helper-page.component.scss']\n})\nexport class HelperPageComponent implements OnInit {\n\n  cupboardNeeds: Needs[] = []; \n  fundingBasket: Needs[] = []; \n  supportedNeeds: Needs[] = [];\n  selectedNeed?: Needs;\n  searchTerm: string = '';\n\n  constructor(private helperService: HelperService, private cupboardService: Cupboard, \n    private fundingBasketService: FundingBasketService) {}\n\n  ngOnInit(): void {\n    this.cupboardService.getCupboardNeedsObservable().subscribe((needs: Needs[]) => {\n      this.cupboardNeeds = needs;\n    });\n  }\n\n  showNeedDetails(need: Needs): void {\n    this.selectedNeed = need;\n  }\n\n  onSelect(need: Needs): void {\n    this.selectedNeed = need;\n  }\n\n  searchCupboardNeeds(): void {\n    if (!this.searchTerm.trim()) {\n      this.getCupboardNeeds();\n      return;\n    }\n\n    const filteredNeeds = this.cupboardNeeds.filter(need =>\n      need.name.toLowerCase().includes(this.searchTerm.toLowerCase())\n    );\n\n    this.cupboardNeeds = filteredNeeds;\n  }\n\n  resetCupboardSearch(): void {\n    this.searchTerm = '';\n    this.getCupboardNeeds();\n  }\n\n  addToBasket(cupboardNeed: Needs): void {\n    if (cupboardNeed.quantity > 0) {\n      this.fundingBasket.addSupportedNeed(cupboardNeed).subscribe(\n        addedNeed => {\n          const copiedNeed: Needs = {\n            name: addedNeed.name,\n            cost: addedNeed.cost,\n            type: addedNeed.type,\n            quantity: 1\n          };\n  \n          this.fundingBasket.push(copiedNeed);\n  \n          const originalNeedIndex = this.cupboardNeeds.findIndex(n => n.name === cupboardNeed.name);\n          if (originalNeedIndex !== -1) {\n            this.cupboardNeeds[originalNeedIndex].quantity -= 1;\n          }\n  \n          const supportedNeedIndex = this.cupboardNeeds.findIndex(n => n.name === copiedNeed.name);\n          if (supportedNeedIndex !== -1) {\n            this.cupboardNeeds[supportedNeedIndex] = copiedNeed;\n          } else {\n            this.cupboardNeeds.push(copiedNeed);\n          }\n  \n          const message = `Adding need to the basket`;\n          alert(message);\n        },\n        error => {\n          console.error(error);\n        }\n      );\n    } else {\n      const message = `Cannot add need to the basket since the quantity is already at 0.`;\n      alert(message);\n    }\n  }\n    \n\n  removeFromBasket(need: Needs): void {\n    this.helperService.removeSupportedNeed(need.name).subscribe(\n      _ => {\n        const originalNeed = this.fundingBasket.find(n => n.name === need.name);\n        if (originalNeed) {\n          originalNeed.quantity += 1;\n  \n          this.fundingBasket = this.fundingBasket.filter(n => n.name !== need.name);\n          this.supportedNeeds = this.supportedNeeds.filter(n => n.name !== need.name);\n  \n          const message = `Removing need from basket`;\n          alert(message);\n        } else {\n          const message = `Unable to remove since not in Funding Basket`;\n          alert(message);\n        }\n      },\n      error => {\n        console.error(error);\n      }\n    );\n  }\n  \n  checkout(): void {\n    this.helperService.checkOut().subscribe(\n      _ => {\n        this.fundingBasket = this.fundingBasket.filter(need => need.quantity > 0);\n  \n        this.fundingBasket = [];\n        this.supportedNeeds = [];\n  \n        const message = 'Checkout Successful!';\n        alert(message);\n      },\n      error => {\n        console.error(error);\n      }\n    );\n  }  \n\n  private getCupboardNeeds(): void {\n    this.cupboardService.getCupboardNeedsObservable().subscribe((needs: Needs[]) => {\n      this.cupboardNeeds = needs;\n    });\n  }\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}