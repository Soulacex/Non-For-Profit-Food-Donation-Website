{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let HelperPageComponent = class HelperPageComponent {\n  constructor(helperService, cupboardService) {\n    this.helperService = helperService;\n    this.cupboardService = cupboardService;\n    this.cupboardNeeds = [];\n    this.fundingBasket = [];\n    this.supportedNeeds = [];\n    this.searchTerm = '';\n  }\n  ngOnInit() {\n    this.getCupboardNeeds(); // Load initial cupboard needs\n  }\n\n  showNeedDetails(need) {\n    this.selectedNeed = need;\n  }\n  onSelect(need) {\n    this.selectedNeed = need;\n  }\n  searchCupboardNeeds() {\n    if (!this.searchTerm.trim()) {\n      this.getCupboardNeeds();\n      return;\n    }\n    this.cupboardService.searchPartialName(this.searchTerm).subscribe(filteredNeeds => {\n      this.cupboardNeeds = filteredNeeds;\n    }, error => {\n      console.error(error);\n    });\n  }\n  resetCupboardSearch() {\n    this.searchTerm = '';\n    this.getCupboardNeeds();\n  }\n  addToBasket(cupboardNeed) {\n    if (cupboardNeed.quantity > 0) {\n      this.helperService.addSupportedNeed(cupboardNeed.name, 1).subscribe(addedNeed => {\n        const originalBasketIndex = this.fundingBasket.findIndex(n => n.name === addedNeed.name);\n        if (originalBasketIndex !== -1) {\n          this.fundingBasket[originalBasketIndex].quantity += 1;\n        } else {\n          this.fundingBasket.push(addedNeed);\n        }\n        this.cupboardNeeds.find(n => n.name === cupboardNeed.name).quantity -= 1;\n        const message = `Adding need to the basket`;\n        alert(message);\n      }, error => {\n        console.error(error);\n        const message = `Error adding need to the basket`;\n        alert(message);\n      });\n    } else {\n      const message = `Cannot add need to the basket since the quantity is already at 0.`;\n      alert(message);\n    }\n  }\n  removeFromBasket(need) {\n    this.helperService.removeSupportedNeed(need.name).subscribe(_ => {\n      const originalNeed = this.cupboardNeeds.find(n => n.name === need.name);\n      if (originalNeed) {\n        originalNeed.quantity += 1;\n        this.fundingBasket = this.fundingBasket.filter(n => n.name !== need.name);\n        const message = `Removing need from basket`;\n        alert(message);\n      } else {\n        const message = `Original need not found in cupboard`;\n        alert(message);\n      }\n    }, error => {\n      console.error(error);\n      const message = `Error removing need from basket`;\n      alert(message);\n    });\n  }\n  checkout() {\n    this.helperService.checkOut().subscribe(_ => {\n      this.fundingBasket = this.fundingBasket.filter(need => need.quantity > 0);\n      this.fundingBasket = [];\n      this.supportedNeeds = [];\n      this.getCupboardNeeds();\n      const message = 'Checkout Successful!';\n      alert(message);\n    }, error => {\n      console.error(error);\n      const message = 'Error during checkout';\n      alert(message);\n    });\n  }\n  getCupboardNeeds() {\n    this.cupboardService.getAllNeeds().subscribe(needs => {\n      this.cupboardNeeds = needs;\n    }, error => {\n      console.error(error);\n    });\n  }\n};\nHelperPageComponent = __decorate([Component({\n  selector: 'app-helper-page',\n  templateUrl: './helper-page.component.html',\n  styleUrls: ['./helper-page.component.scss']\n})], HelperPageComponent);","map":{"version":3,"names":["Component","HelperPageComponent","constructor","helperService","cupboardService","cupboardNeeds","fundingBasket","supportedNeeds","searchTerm","ngOnInit","getCupboardNeeds","showNeedDetails","need","selectedNeed","onSelect","searchCupboardNeeds","trim","searchPartialName","subscribe","filteredNeeds","error","console","resetCupboardSearch","addToBasket","cupboardNeed","quantity","addSupportedNeed","name","addedNeed","originalBasketIndex","findIndex","n","push","find","message","alert","removeFromBasket","removeSupportedNeed","_","originalNeed","filter","checkout","checkOut","getAllNeeds","needs","__decorate","selector","templateUrl","styleUrls"],"sources":["/Users/soulacex/swen-261/team-project-2231-swen-261-07-7-g-fundsinhighplaces/ufund-ui/UFund-Store/src/app/helper/helper-page/helper-page.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Needs } from 'src/app/needs';\nimport { HelperService } from 'src/app/helper.service';\nimport { CupboardService } from 'src/app/cupboard.service';\n\n@Component({\n  selector: 'app-helper-page',\n  templateUrl: './helper-page.component.html',\n  styleUrls: ['./helper-page.component.scss']\n})\nexport class HelperPageComponent implements OnInit {\n\n  cupboardNeeds: Needs[] = [];\n  fundingBasket: Needs[] = [];\n  supportedNeeds: Needs[] = [];\n  selectedNeed?: Needs;\n  searchTerm: string = '';\n\n  constructor(private helperService: HelperService, private cupboardService: CupboardService) {}\n\n  ngOnInit(): void {\n    this.getCupboardNeeds(); // Load initial cupboard needs\n  }\n\n  showNeedDetails(need: Needs): void {\n    this.selectedNeed = need;\n  }\n\n  onSelect(need: Needs): void {\n    this.selectedNeed = need;\n  }\n\n  searchCupboardNeeds(): void {\n    if (!this.searchTerm.trim()) {\n      this.getCupboardNeeds();\n      return;\n    }\n\n    this.cupboardService.searchPartialName(this.searchTerm).subscribe(\n      (filteredNeeds: Needs[]) => {\n        this.cupboardNeeds = filteredNeeds;\n      },\n      error => {\n        console.error(error);\n      }\n    );\n  }\n\n  resetCupboardSearch(): void {\n    this.searchTerm = '';\n    this.getCupboardNeeds();\n  }\n\n  addToBasket(cupboardNeed: Needs): void {\n    if (cupboardNeed.quantity > 0) {\n      this.helperService.addSupportedNeed(cupboardNeed.name, 1).subscribe(\n        (addedNeed: Needs) => {\n          const originalBasketIndex = this.fundingBasket.findIndex(n => n.name === addedNeed.name);\n          if (originalBasketIndex !== -1) {\n            this.fundingBasket[originalBasketIndex].quantity += 1;\n          } else {\n            this.fundingBasket.push(addedNeed);\n          }\n\n          this.cupboardNeeds.find(n => n.name === cupboardNeed.name).quantity -= 1;\n\n          const message = `Adding need to the basket`;\n          alert(message);\n        },\n        error => {\n          console.error(error);\n          const message = `Error adding need to the basket`;\n          alert(message);\n        }\n      );\n    } else {\n      const message = `Cannot add need to the basket since the quantity is already at 0.`;\n      alert(message);\n    }\n  }\n\n  removeFromBasket(need: Needs): void {\n    this.helperService.removeSupportedNeed(need.name).subscribe(\n      _ => {\n        const originalNeed = this.cupboardNeeds.find(n => n.name === need.name);\n        if (originalNeed) {\n          originalNeed.quantity += 1;\n\n          this.fundingBasket = this.fundingBasket.filter(n => n.name !== need.name);\n\n          const message = `Removing need from basket`;\n          alert(message);\n        } else {\n          const message = `Original need not found in cupboard`;\n          alert(message);\n        }\n      },\n      error => {\n        console.error(error);\n        const message = `Error removing need from basket`;\n        alert(message);\n      }\n    );\n  }\n\n  checkout(): void {\n    this.helperService.checkOut().subscribe(\n      _ => {\n        this.fundingBasket = this.fundingBasket.filter(need => need.quantity > 0);\n\n        this.fundingBasket = [];\n        this.supportedNeeds = [];\n        this.getCupboardNeeds();\n\n        const message = 'Checkout Successful!';\n        alert(message);\n      },\n      error => {\n        console.error(error);\n        const message = 'Error during checkout';\n        alert(message);\n      }\n    );\n  }\n\n  private getCupboardNeeds(): void {\n    this.cupboardService.getAllNeeds().subscribe(\n      (needs: Needs[]) => {\n        this.cupboardNeeds = needs;\n      },\n      error => {\n        console.error(error);\n      }\n    );\n  }\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}